<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Detailed 3D House with Three.js</title>
    <style>
      body { margin: 0; overflow: hidden; }
      canvas { display: block; }
    </style>
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script>
      // Initialize scene, camera, and renderer
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.shadowMap.enabled = true;
      document.body.appendChild(renderer.domElement);

      // Position the camera
      camera.position.set(20, 15, 20);
      camera.lookAt(0, 5, 0);

      // Add ambient light
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
      scene.add(ambientLight);

      // Add directional light
      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
      directionalLight.position.set(10, 20, 10);
      directionalLight.castShadow = true;
      scene.add(directionalLight);

      // Create a group for the house
      const house = new THREE.Group();
      scene.add(house);

      // Create the base (a cube)
      const baseGeometry = new THREE.BoxGeometry(10, 5, 10);
      const baseMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
      const base = new THREE.Mesh(baseGeometry, baseMaterial);
      base.position.y = 2.5;
      base.castShadow = true;
      house.add(base);

      // Create the roof (a pyramid)
      const roofGeometry = new THREE.ConeGeometry(8, 5, 4);
      roofGeometry.rotateX(Math.PI / 2);
      const roofMaterial = new THREE.MeshStandardMaterial({ color: 0x8B0000 });
      const roof = new THREE.Mesh(roofGeometry, roofMaterial);
      roof.position.y = 7.5;
      roof.castShadow = true;
      house.add(roof);

      // Create a door
      const doorGeometry = new THREE.BoxGeometry(2, 3, 0.2);
      const doorMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
      const door = new THREE.Mesh(doorGeometry, doorMaterial);
      door.position.set(0, 1, -5);
      house.add(door);

      // Create windows
      const windowGeometry = new THREE.BoxGeometry(1.5, 1.5, 0.2);
      const windowMaterial = new THREE.MeshStandardMaterial({ color: 0xADD8E6 });
      const window1 = new THREE.Mesh(windowGeometry, windowMaterial);
      window1.position.set(3, 3, -5);
      house.add(window1);

      const window2 = new THREE.Mesh(windowGeometry, windowMaterial);
      window2.position.set(-3, 3, -5);
      house.add(window2);

      // Window frames
      const frameGeometry = new THREE.BoxGeometry(1.8, 1.8, 0.1);
      const frameMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
      const frame1 = new THREE.Mesh(frameGeometry, frameMaterial);
      frame1.position.set(3, 3, -4.9);
      house.add(frame1);

      const frame2 = new THREE.Mesh(frameGeometry, frameMaterial);
      frame2.position.set(-3, 3, -4.9);
      house.add(frame2);

      // Chimney
      const chimneyGeometry = new THREE.BoxGeometry(1, 3, 1);
      const chimneyMaterial = new THREE.MeshStandardMaterial({ color: 0x8B0000 });
      const chimney = new THREE.Mesh(chimneyGeometry, chimneyMaterial);
      chimney.position.set(3, 8, 2);
      house.add(chimney);

      // Smoke (particles)
      const smokeParticles = new THREE.Group();
      for (let i = 0; i < 10; i++) {
          const particleGeometry = new THREE.SphereGeometry(0.2, 8, 8);
          const particleMaterial = new THREE.MeshStandardMaterial({ color: 0xD3D3D3 });
          const particle = new THREE.Mesh(particleGeometry, particleMaterial);
          particle.position.set(
              3 + Math.random() * 0.2,
              9 + Math.random() * 0.5,
              2 + Math.random() * 0.2
          );
          smokeParticles.add(particle);
      }
      house.add(smokeParticles);

      // Grass (plane)
      const grassGeometry = new THREE.PlaneGeometry(30, 30);
      const grassMaterial = new THREE.MeshStandardMaterial({ color: 0x228B22 });
      const grass = new THREE.Mesh(grassGeometry, grassMaterial);
      grass.rotation.x = -Math.PI / 2;
      grass.position.y = -0.1;
      grass.receiveShadow = true;
      scene.add(grass);

      // Flowers
      for (let i = 0; i < 20; i++) {
          const flowerGeometry = new THREE.SphereGeometry(0.3, 8, 8);
          const flowerMaterial = new THREE.MeshStandardMaterial({ color: Math.random() * 0xffffff });
          const flower = new THREE.Mesh(flowerGeometry, flowerMaterial);
          flower.position.set(
              -10 + Math.random() * 20,
              0.2,
              -10 + Math.random() * 20
          );
          scene.add(flower);
      }

      // Picket fence
      for (let i = 0; i < 15; i++) {
          const fenceGeometry = new THREE.BoxGeometry(0.2, 1, 0.1);
          const fenceMaterial = new THREE.MeshStandardMaterial({ color: 0xffffff });
          const fence = new THREE.Mesh(fenceGeometry, fenceMaterial);
          fence.position.set(-10 + i * 1.5, 0.5, -8);
          scene.add(fence);
      }

      // Skybox (background)
      scene.background = new THREE.Color(0x87CEEB);

      // OrbitControls
      const controls = new THREE.OrbitControls(camera, renderer.domElement);

      // Animation loop
      function animate() {
          requestAnimationFrame(animate);
          controls.update();

          // Animate smoke
          smokeParticles.children.forEach(particle => {
              particle.position.y += 0.01;
              if (particle.position.y > 10) {
                  particle.position.y = 9;
              }
          });

          renderer.render(scene, camera);
      }
      animate();

      // Handle window resizing
      window.addEventListener('resize', () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
      });
    </script>
  </body>
</html>
